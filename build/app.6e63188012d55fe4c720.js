"use strict";(self.webpackChunkpb_connect=self.webpackChunkpb_connect||[]).push([[524],{2142:(e,t,n)=>{n.r(t),n.d(t,{default:()=>It});var r=n(6540),i=n(5793),a=n(7254),o=n(9067),l=n(1406),c=n(3333),s=n(5878),d=n(4279);const u=e=>({fontFamily:['"Inter"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(","),h5:{fontWeight:700},h6:{fontWeight:700},button:{fontWeight:600,textTransform:"Capitalize"},body1Bold:{fontSize:"1rem",lineHeight:"1.5",letterSpacing:"0.00938em",fontWeight:600},caption2:{fontSize:10,fontStyle:"normal",fontWeight:400,lineHeight:"normal",color:(0,d.X4)(e.text.primary,.45)}}),m=(e,t)=>{const n={containedPrimary:e.primary.main,containedSecondary:e.secondary.main,containedError:e.error.main,containedWarning:e.warning.main,containedInfo:e.info.main,containedSuccess:e.success.main};return{[t]:{"&:disabled":{backgroundColor:(0,d.X4)(n[t],.54),color:e.common.white}}}},p=e=>({styleOverrides:{root:{padding:"0.875rem 2rem"},contained:{},...m(e,"containedPrimary"),...m(e,"containedSecondary"),...m(e,"containedError"),...m(e,"containedWarning"),...m(e,"containedInfo"),...m(e,"containedSuccess"),outlined:{background:"".concat(e.common.white," !important")},text:{background:"".concat(e.common.white," !important")}},defaultProps:{disableElevation:!0}}),g=e=>({styleOverrides:{root:{background:e.background.paper,color:e.text.primary,padding:"16px 32px",borderBottom:"1px solid ".concat((0,d.X4)(e.common.black,.12)),justifyContent:"space-between",alignItems:"center",flexDirection:"row"}},defaultProps:{elevation:0}}),h=e=>({styleOverrides:{root:{"& .MuiInputBase-root, & .MuiInputLabel-root":{fontSize:14},"& .MuiInputLabel-root.MuiInputLabel-shrink":{transform:"translate(14px, -6px) scale(0.75)"},"& .Mui-disabled":{WebkitTextFillColor:"".concat(e.text.primary," !important"),cursor:"not-allowed !important"}}},defaultProps:{}});var f=n(6862);const E=e=>({styleOverrides:{root:{fontSize:14,"& .Mui-disabled":{WebkitTextFillColor:"".concat(e.text.primary," !important"),cursor:"not-allowed !important"}}},defaultProps:{IconComponent:f.A,MenuProps:{PaperProps:{sx:{maxHeight:250}}}}}),b=e=>({styleOverrides:{root:{width:28,height:16,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(12px)",color:e.common.white,"& + .MuiSwitch-track":{backgroundColor:e.primary.main,opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:e.primary.main,border:"6px solid ".concat(e.common.white)},"&.Mui-disabled .MuiSwitch-thumb":{color:e.grey[100]},"&.Mui-disabled + .MuiSwitch-track":{opacity:.7}},"& .MuiSwitch-thumb":{boxSizing:"border-box",boxShadow:"none",width:12,height:12},"& .MuiSwitch-track":{borderRadius:8,backgroundColor:(0,d.X4)(e.text.primary,.5),opacity:1,transition:"background-color 500ms"}}},defaultProps:{}}),A=e=>({styleOverrides:{root:{},body:{borderBottom:"none"},head:{borderBottom:"1px solid ".concat((0,d.X4)(e.text.primary,.1)),paddingBottom:11}},defaultProps:{}}),y=e=>({styleOverrides:{root:t=>{let{theme:n}=t;return{"&:nth-of-type(even)":{backgroundColor:(0,d.X4)(e.secondary.main,.02)},"&:hover":{background:"linear-gradient(90deg, ".concat((0,d.X4)(e.secondary.main,0)," 1.84%, ").concat((0,d.X4)(e.secondary.main,.19)," 28.06%)")},"td:first-of-type":{borderTopLeftRadius:"".concat(n.shape.borderRadius,"px"),borderBottomLeftRadius:"".concat(n.shape.borderRadius,"px")},"td:last-of-type":{borderTopRightRadius:"".concat(n.shape.borderRadius,"px"),borderBottomRightRadius:"".concat(n.shape.borderRadius,"px")}}}},defaultProps:{}});var x=n(504);const v=80,w="#F2F1FC",C=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"left",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"hidden",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"fixed",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"launcher";return{borderRadius:"".concat(e.shape.borderRadius,"px"),zIndex:1e9,position:l,bottom:r,[t]:n,minWidth:80,minHeight:v,width:i,height:a,overflow:o,background:"detail"===c?"linear-gradient(90deg, rgba(255, 255, 255, 0.20) 1.1%, rgba(255, 255, 255, 0.40) 99.77%)":w,..."detail"===c&&{backdropFilter:"blur(20px)"}}};var S=n(2543);const k=e=>"".concat("https://pingbaselrsstorage.blob.core.windows.net/pingbase-client/assets/").concat((0,S.trimStart)(e,"/")),T=k("videos/widget/ManWaving.mp4"),M=k("videos/widget/WomanWaving.mp4"),P=function(){const e=(0,x.A)((e=>e.widgetDetailOpen)),t=(0,x.A)((e=>e.setWidgetDetailOpen)),n=(0,x.A)((e=>e.launcherAvatar)),i={1:T,2:M};return r.createElement(o.A,{sx:e=>(e=>({...C(e,x.A.getState().widgetPosition,20,20,80,v,"hidden"),cursor:x.A.getState().widgetDetailOpen?"default":"pointer"}))(e),onClick:()=>{e||t(!0)}},r.createElement(o.A,{component:"video",src:i[n],autoPlay:!0,muted:!0,loop:!0,style:{width:"100%",height:"100%",objectFit:"cover"}}))};var R=n(2222),I=n(9521),W=n(4073);function D(e){const{label:t,background:n,color:i}=e;return r.createElement(R.A,{height:16,px:.5,alignItems:"center",justifyContent:"center",borderRadius:8,fontSize:12,fontWeight:700,minWidth:22,sx:{background:e=>n&&n(e),color:e=>i&&i(e)}},t)}D.defaultProps={background:e=>e.palette.secondary.main,color:e=>e.palette.common.white};const z=D,B=e=>({...C(e,x.A.getState().widgetPosition,20,20,80,v,"hidden"),cursor:x.A.getState().widgetDetailOpen?"default":"pointer"});function N(e){const{icon:t,description:n,badgeCount:i,onClick:a}=e;return r.createElement(R.A,{direction:"row",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",position:"relative",p:2,spacing:2,onClick:a},r.createElement(R.A,{height:"100%",sx:{aspectRatio:1},alignItems:"center",justifyContent:"center"},t),Boolean(n)&&r.createElement(W.A,{variant:"body2",maxWidth:100},n),Boolean(i)&&r.createElement(o.A,{sx:{position:"absolute",top:5,right:5}},r.createElement(z,{label:i})))}N.defaultProps={badgeCount:null,description:null};const O=N,j=function(e){const{children:t,color1:n,color2:i}=e;return r.createElement(R.A,{sx:{background:e=>"linear-gradient(".concat(w,", ").concat(w,") padding-box, linear-gradient(to bottom, ").concat(n(e),", ").concat(i(e),") border-box"),border:"2px solid transparent",borderRadius:e=>{let{shape:t}=e;return"".concat(t.borderRadius,"px")}},width:"100%",height:"100%"},t)},U=function(){const e=(0,x.A)((e=>e.widgetDetailOpen)),t=(0,x.A)((e=>e.setWidgetDetailOpen));return r.createElement(R.A,{sx:e=>({...B(e)}),onClick:()=>{e||t(!0)}},r.createElement(j,{color1:e=>{let{palette:t}=e;return t.primary.main},color2:e=>{let{palette:t}=e;return t.secondary.main}},r.createElement(O,{icon:r.createElement(I.A,{color:"primary",sx:{width:"100%",height:"100%"}}),badgeCount:1,onClick:()=>{console.log("Voice notes clicked")}})))};var L=n(6707);const F=function(){const e=(0,x.A)((e=>e.widgetDetailOpen)),t=(0,x.A)((e=>e.setWidgetDetailOpen));return r.createElement(R.A,{sx:e=>({...B(e)}),onClick:()=>{e||t(!0)}},r.createElement(j,{color1:e=>{let{palette:t}=e;return t.error.main},color2:e=>{let{palette:t}=e;return t.secondary.main}},r.createElement(O,{icon:r.createElement(L.A,{color:"error",sx:{width:"100%",height:"100%"}}),badgeCount:1,onClick:()=>{console.log("Missed call clicked")}})))};var V=n(4285);const X=function(){return r.createElement(R.A,{sx:e=>({...B(e)})},r.createElement(j,{color1:e=>{let{palette:t}=e;return t.primary.main},color2:e=>{let{palette:t}=e;return t.secondary.main}},r.createElement(O,{icon:r.createElement(V.A,{color:"primary",sx:{width:"100%",height:"100%"}}),onClick:()=>{console.log("Timeline clicked")}})))};var J=n(2561);const H=function(){return r.createElement(R.A,{sx:e=>({...B(e)})},r.createElement(j,{color1:e=>{let{palette:t}=e;return t.primary.main},color2:e=>{let{palette:t}=e;return t.secondary.main}},r.createElement(O,{icon:r.createElement(J.A,{color:"primary",sx:{width:"100%",height:"100%"}}),onClick:()=>{console.log("Voice recording clicked")}})))};var Z=n(1832);const q=function(){const e=(0,x.A)((e=>e.setWidgetLauncher)),t=(0,x.A)((e=>e.setWidgetDetailOpen));return(0,r.useEffect)((()=>{t(!1);const n=setTimeout((()=>{e("ringing"),t(!0)}),1e4);return()=>clearTimeout(n)}),[]),r.createElement(R.A,{sx:e=>({...B(e),width:"fit-content"})},r.createElement(j,{color1:e=>{let{palette:t}=e;return t.primary.main},color2:e=>{let{palette:t}=e;return t.secondary.main}},r.createElement(O,{icon:r.createElement(Z.A,{color:"primary",sx:{width:"100%",height:"100%"}}),description:"You’re about to receive a call...",onClick:()=>{console.log("Incoming call clicked")}})))},Y=function(){const e=(0,x.A)((e=>e.launcherAvatar)),t={1:T,2:M};return r.createElement(o.A,{sx:e=>(e=>({...C(e,x.A.getState().widgetPosition,20,20,80,v,"hidden"),cursor:x.A.getState().widgetDetailOpen?"default":"pointer"}))(e)},r.createElement(o.A,{component:"video",src:t[e],autoPlay:!0,muted:!0,loop:!0,style:{width:"100%",height:"100%",objectFit:"cover"}}))},G=function(){switch((0,x.A)((e=>e.widgetLauncher))){case"default":return r.createElement(P,null);case"voiceNote":return r.createElement(U,null);case"missedCall":return r.createElement(F,null);case"voiceRecording":return r.createElement(H,null);case"aboutToReceiveCall":return r.createElement(q,null);case"timeline":return r.createElement(X,null);case"ringing":return r.createElement(Y,null);default:return null}};var _=n(6990),K=n(1031),Q=n(3753),$=n(2862),ee=n(2480),te=n(1621),ne=n(5644),re=n(7045);const ie={isMeetingLoading:!1,meetingId:"",callId:"",meetingAuthToken:"",meetingInitType:"audio",recStartTimestamp:"",isMeetingStarted:!1,isCallRinging:!1,isUserJoined:!1,isUserDisconnected:!1},ae=(0,te.vt)(((e,t)=>({...ie,setIsMeetingStarted:t=>{e({isMeetingStarted:t}),t&&e({isCallRinging:!0})},setIsUserJoined:t=>{e({isUserJoined:t}),t&&e({isCallRinging:!1})},setIsUserDisconnected:t=>{e({isUserDisconnected:t})},setMeetingInitType:t=>e({meetingInitType:t}),setRecStartTimestamp:t=>e({recStartTimestamp:t}),endMeeting:()=>{e({meetingAuthToken:ie.meetingAuthToken}),e({isMeetingStarted:ie.isMeetingStarted}),e({isUserJoined:ie.isMeetingStarted}),e({meetingInitType:ie.meetingInitType}),e({recStartTimestamp:ie.recStartTimestamp}),e({isCallRinging:ie.isCallRinging}),e({isUserDisconnected:ie.isUserDisconnected}),e({meetingId:ie.meetingId}),e({callId:ie.callId}),x.A.getState().setWidgetLauncher("default"),x.A.getState().setWidgetDetailOpen(!1),x.A.getState().setAgentName("")},startMeeting:async n=>{e({isMeetingLoading:!0});try{var r;const t=null===(r=("post"===n?await(0,ne.yT)():await(0,ne.yv)()).data)||void 0===r?void 0:r.data,i=(0,re.i4)(t);e({meetingId:null==i?void 0:i.meetingId}),e({meetingAuthToken:"post"===n?null==i?void 0:i.authToken:null==i?void 0:i.endUserAuthToken}),null!=i&&i.meetingAuthToken&&e({isMeetingStarted:!0})}catch(e){console.error(e),t().endMeeting()}finally{e({isMeetingLoading:!1})}},resetMeetingStore:()=>e(ie)})));function oe(e){const{hideTimelineBtn:t,onCallBtnClick:n,onScheduleBtnClick:i,onVoiceNoteBtnClick:a,onTimelineBtnClick:o}=e,l=(0,x.A)((e=>e.setWidgetLauncher)),c=ae((e=>e.startMeeting)),s=(0,x.A)((e=>e.teamName));return r.createElement(R.A,{direction:"row",spacing:2,p:0,height:"100%",alignItems:"center",justifyContent:"center",position:"relative"},r.createElement(_.A,{variant:"contained",sx:{height:36,fontWeight:500,px:2},startIcon:r.createElement(K.A,null),onClick:()=>{null==n||n(),c("post"),l("inCall")}},"Call ",s),r.createElement(_.A,{variant:"outlined",sx:{height:36,fontWeight:500,px:2},startIcon:r.createElement(Q.A,null),onClick:()=>{null==i||i()}},"Schedule Call"),r.createElement(_.A,{variant:"outlined",sx:{height:36,fontWeight:500,px:2},startIcon:r.createElement($.A,null),onClick:()=>{null==a||a(),l("voiceRecording")}},"Send Voice Note"),!t&&r.createElement(_.A,{variant:"outlined",color:"inherit",sx:{height:36,fontWeight:500,px:2},startIcon:r.createElement(ee.A,null),onClick:()=>{null==o||o(),l("timeline")}},"Timeline"))}oe.defaultProps={hideTimelineBtn:!1,onCallBtnClick:null,onScheduleBtnClick:null,onVoiceNoteBtnClick:null,onTimelineBtnClick:null};const le=oe;var ce=n(1641),se=n(6099);const de=function(e){const{onCloseDetail:t}=e,n="left"===(0,x.A)((e=>e.widgetPosition))?"right":"left";return r.createElement(ce.A,{sx:{position:"absolute",top:0,[n]:0,transform:"translate(".concat("right"===n?"50%":"-50%",", -50%)"),background:e=>{let{palette:t}=e;return"".concat(t.common.white," !important")},p:0,m:"0px !important"},onClick:t},r.createElement(se.A,null))},ue=e=>({...C(e,x.A.getState().widgetPosition,108,20,"fit-content",v,"visible","fixed","detail"),border:"1px solid ".concat(e.palette.divider)}),me=function(){const e=(0,x.A)((e=>e.setWidgetDetailOpen)),t=(0,x.A)((e=>e.setWidgetLauncher));return r.createElement(R.A,{sx:e=>({...ue(e)}),alignItems:"center",justifyContent:"center",direction:"row"},r.createElement(R.A,{p:2,height:"100%",position:"relative",justifyContent:"space-between"},r.createElement(le,null),r.createElement(de,{onCloseDetail:()=>{e(!1),t("default")}})))};var pe=n(2717),ge=n(6526),he=n(8947),fe=n(3572),Ee=n(8971),be=n(4675),Ae=n(6398),ye=n(2598);const xe=e=>{const t=Number(e.toFixed(0)),n=Math.floor(t/3600);let r=Math.floor(t/60%60),i=t%60;const a=n<10?"0".concat(n):n;return r=r<10?"0".concat(r):r,i=i<10?"0".concat(i):i,"".concat(n?"".concat(a,":"):"").concat(r,":").concat(i)};!function(){const e=[];for(let t=0;t<24;t+=1)for(let n=0;n<60;n+=30){const r=t<12?"AM":"PM",i="".concat(t%12==0?12:t%12,":").concat(n<10?"0":"").concat(n," ").concat(r);e.push(i)}}();const ve=function(e){const{recordingTime:t,mediaRecorder:n}=e,i=(0,be.A)();return r.createElement(R.A,{width:260,direction:"row",px:2,py:.5,alignItems:"center",justifyContent:"space-between",sx:{borderRadius:e=>{let{shape:t}=e;return"".concat(t.borderRadius,"px")},background:e=>{let{palette:t}=e;return(0,d.X4)(t.secondary.main,.1)},opacity:n?1:.5}},r.createElement(R.A,{direction:"row",flex:1},n?r.createElement(ye.r,{mediaRecorder:n,width:140,height:24,barWidth:2,gap:2,fftSize:512,maxDecibels:-10,minDecibels:-80,smoothingTimeConstant:.8,barColor:i.palette.text.primary}):r.createElement(R.A,{direction:"row",flex:1},r.createElement(Ae.A,null))),r.createElement(W.A,{variant:"h6"},xe(t)))};var we=n(1015),Ce=n(8104),Se=n(5024),ke=n(9696),Te=n(7149),Me=n(6982);function Pe(e){var t;const{audioSrc:n,autoPlay:i,audioType:a,isCurrentPlaying:l,index:c,hideVolumeSlider:s,onPlay:u,onStop:m,onClose:p,defaultCurrentTime:g,setDefaultCurrentTime:h}=e,f=(0,r.useRef)(null),[E,b]=(0,r.useState)(!1),[A,y]=(0,r.useState)(g||0),[v,w]=(0,r.useState)(0),[C,S]=(0,r.useState)(0),[k,T]=(0,r.useState)(!1),M=(0,x.A)((e=>e.userVolume)),P=(0,x.A)((e=>e.setUserVolume));return(0,r.useEffect)((()=>{var e;if(l){if(!E&&i){var t;null==f||null===(t=f.current)||void 0===t||t.play(),b(!0)}}else null==f||null===(e=f.current)||void 0===e||e.pause(),b(!1)}),[l]),(0,r.useEffect)((()=>{"blob"===a&&(0,Me.A)(n).then((e=>{w(e)}))}),[n]),(0,r.useEffect)((()=>{var e;v||"blob"===a||w((null==f||null===(e=f.current)||void 0===e?void 0:e.duration)||0)}),[null==f||null===(t=f.current)||void 0===t?void 0:t.duration]),(0,r.useEffect)((()=>{f.current&&!s&&(f.current.volume=M/100)}),[M]),(0,r.useEffect)((()=>{v&&!k&&(g&&f.current&&(y(g),f.current.currentTime=g,S(100*g/v)),T(!0))}),[v,k]),r.createElement(R.A,{direction:"row",spacing:.5,borderRadius:e=>"".concat(e.shape.borderRadius,"px"),sx:{background:e=>{let{palette:t}=e;return(0,d.X4)(t.secondary.main,.1)}},alignItems:"center",width:"100%",pr:1},r.createElement(o.A,{id:"end-user-audio-element-".concat(c),component:"audio",ref:f,src:n,onTimeUpdate:()=>{f.current&&(y(f.current.currentTime),h&&h(f.current.currentTime),S(100*f.current.currentTime/v))},onEnded:()=>{var e;f.current&&(null==f||null===(e=f.current)||void 0===e||e.pause()),b(!1),m()},onLoadedData:()=>{f.current&&"blob"!==a&&w(f.current.duration)}}),r.createElement(ce.A,{onClick:()=>{var e,t;E?(null==f||null===(e=f.current)||void 0===e||e.pause(),b(!1)):(null==f||null===(t=f.current)||void 0===t||t.play(),u(c),b(!0))}},l&&E?r.createElement(Se.A,{color:"secondary"}):r.createElement(Ce.A,{color:"secondary"})),r.createElement(we.Ay,{value:C,onChange:(e,t)=>{if(f.current){const e=t*v/100;f.current.currentTime=e}},sx:{flexBasis:"40%"},color:"secondary"}),r.createElement(W.A,{variant:"body2"},xe(v-A)),r.createElement(R.A,{direction:"row",alignItems:"center",justifyContent:"end",flex:1,spacing:.75},!s&&r.createElement(r.Fragment,null,r.createElement(Te.A,null),r.createElement(we.Ay,{value:M,onChange:(e,t)=>{P(t)},sx:{flex:1,maxWidth:42},color:"secondary",disabled:!E})),Boolean(p)&&r.createElement(ce.A,{onClick:p,size:"small"},r.createElement(ke.A,{color:"secondary",sx:{width:16,height:16}}))))}Pe.defaultProps={audioType:"url",hideVolumeSlider:!1,onClose:null,defaultCurrentTime:0,autoPlay:!1,setDefaultCurrentTime:null};const Re=Pe,Ie=function(e){const{audioSrc:t}=e,n={id:"1",src:t},[i,a]=(0,r.useState)(null);return r.createElement(R.A,{width:260},r.createElement(Re,{audioSrc:n.src,audioType:"blob",isCurrentPlaying:i===n.id,index:n.id,onPlay:e=>a(e),onStop:()=>a(null)}))},We=function(){const e=(0,x.A)((e=>e.setWidgetDetailOpen)),t=(0,x.A)((e=>e.setWidgetLauncher)),n=()=>{e(!1),t("default")},[i,a]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),{startRecording:s,stopRecording:d,togglePauseResume:u,recordingBlob:m,isRecording:p,isPaused:g,recordingTime:h,mediaRecorder:f}=(0,Ee.C)();return(0,r.useEffect)((()=>{m&&a(m)}),[m]),r.createElement(R.A,{sx:e=>({...ue(e)}),alignItems:"center",justifyContent:"center",direction:"row"},r.createElement(R.A,{px:1.5,py:.75,height:"100%",position:"relative",justifyContent:"space-between"},r.createElement(o.A,null,r.createElement(W.A,{variant:"body1Bold",fontSize:14,noWrap:!0},"Record & Send Voice Note")),r.createElement(R.A,{direction:"row",spacing:1.5,alignItems:"center"},i?r.createElement(Ie,{audioSrc:URL.createObjectURL(i)}):r.createElement(ve,{recordingTime:h,mediaRecorder:f}),!i&&r.createElement(_.A,{variant:"contained",color:"primary",sx:{height:40,fontWeight:500,...p&&{backgroundColor:e=>{let{palette:t}=e;return"".concat(t.text.primary," !important")}}},startIcon:p?r.createElement(he.A,null):r.createElement(pe.A,null),onClick:()=>{p?d():s()}},p?"Stop":"Record"),i&&r.createElement(_.A,{variant:"outlined",disabled:l,sx:{height:40,fontWeight:500,px:2},startIcon:r.createElement(fe.A,null),onClick:()=>{a(null),s()}},"Redo"),r.createElement(_.A,{variant:"contained",sx:{height:40,px:1.5,fontWeight:500},startIcon:r.createElement(ge.A,null),disabled:p||!i||l,onClick:()=>{i&&(c(!0),(0,ne.Ug)(i).then((()=>{n(),a(null)})).finally((()=>{c(!1)})))}},"Send")),r.createElement(de,{onCloseDetail:n})))};var De=n(8239),ze=n(356),Be=n(5042),Ne=n(3748);const Oe=function(e){let{items:t,ItemNode:n,onWidgetDetailClose:i}=e;const a=(()=>{const[e,t]=(0,r.useState)({width:window.innerWidth,height:window.innerHeight});return(0,r.useEffect)((()=>{const e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),e})();let o=1;a.width>1080?o=4:a.width>890?o=3:a.width>700&&(o=2);const[l,c]=(0,r.useState)(Math.max(t.length-o,0)),[s,u]=(0,r.useState)(null),[m,p]=(0,r.useState)(0);return(0,r.useEffect)((()=>{l>t.length-o&&c(t.length-o)}),[t.length,o]),r.createElement(R.A,{direction:"row",alignItems:"center",spacing:1,height:"100%",p:1.25,position:"relative"},r.createElement(ce.A,{disabled:0===l,onClick:()=>{c((e=>Math.max(e-o,0)))},color:"secondary",size:"small",sx:{background:e=>{let{palette:t}=e;return"".concat((0,d.X4)(t.secondary.main,.12)," !important")},"&:hover":{background:e=>{let{palette:t}=e;return"".concat((0,d.X4)(t.secondary.main,.24)," !important")}}}},r.createElement(Ne.A,null)),r.createElement(De.Ay,{container:!0,columnGap:2,height:"100%"},t.slice(l,l+o).map(((e,t)=>r.createElement(r.Fragment,{key:e.id},r.createElement(De.Ay,{item:!0,xs:!0,key:e.id,width:160,height:"100%"},n(e,s,u,m,p)),t!==o-1&&r.createElement(ze.A,{orientation:"vertical",flexItem:!0}))))),r.createElement(ce.A,{disabled:l===t.length-o,onClick:()=>{c((e=>Math.min(e+o,t.length-o)))},color:"secondary",size:"small",sx:{background:e=>{let{palette:t}=e;return"".concat((0,d.X4)(t.secondary.main,.12)," !important")},"&:hover":{background:e=>{let{palette:t}=e;return"".concat((0,d.X4)(t.secondary.main,.24)," !important")}}}},r.createElement(Be.A,null)),r.createElement(de,{onCloseDetail:i}))},je=function(e){const{item:t,currentPlayingIndex:n,setCurrentPlayingIndex:i,defaultCurrentTime:a,setDefaultCurrentTime:o}=e,l=("VoiceNote"===t.type||"CallHeld"===t.type)&&t.storageUrl&&n!==t.id,c=new Date(t.createdAt),s=c.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),d=c.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric"}),u="".concat(s,", ").concat(d);return r.createElement(R.A,{width:"100%",height:"100%"},r.createElement(R.A,{direction:"row",alignItems:"center",spacing:.75},r.createElement(W.A,{variant:"body2",fontSize:14,fontWeight:600},(e=>{switch(e){case"VoiceNote":return"Voice Note";case"CallScheduled":return"Call Scheduled";case"CallHeld":return"Call Recording";case"MissedCall":return"Missed Call";default:return""}})(t.type)),l&&r.createElement(ce.A,{sx:{p:0},color:"secondary",onClick:()=>{i(t.id),o(0)}},r.createElement(Ce.A,{sx:{width:16,height:16}}))),r.createElement(R.A,{flex:1},n===t.id?r.createElement(R.A,{width:"100%"},r.createElement(Re,{defaultCurrentTime:a,setDefaultCurrentTime:o,autoPlay:n===t.id&&0===a,audioSrc:t.storageUrl,audioType:"url",isCurrentPlaying:n===t.id,index:t.id,onPlay:e=>{i(e),o(0)},onStop:()=>{i(null),o(0)},onClose:()=>{i(null),o(0)},hideVolumeSlider:!0})):r.createElement(r.Fragment,null,r.createElement(W.A,{variant:"body2",fontSize:14,color:"text.secondary"},u),r.createElement(W.A,{variant:"body2",fontSize:14,color:"text.secondary",fontStyle:"italic"},(e=>{const{sender:t,receiver:n,type:r,isParent:i}=e,a=i?t:n;switch(r){case"VoiceNote":case"MissedCall":return i?"By ".concat(a):"You";case"CallScheduled":case"CallHeld":return"With ".concat(a);default:return""}})(t)))))},Ue=e=>({...C(e,x.A.getState().widgetPosition,108,20,"fit-content",v,"visible","fixed","detail"),border:"1px solid ".concat(e.palette.divider)}),Le=(e,t,n,i,a)=>r.createElement(je,{item:e,currentPlayingIndex:t,setCurrentPlayingIndex:n,defaultCurrentTime:i,setDefaultCurrentTime:a}),Fe=function(){const e=(0,x.A)((e=>e.setWidgetDetailOpen)),t=(0,x.A)((e=>e.setWidgetLauncher));return r.createElement(R.A,{sx:e=>({...Ue(e)}),alignItems:"center",justifyContent:"center",direction:"row"},r.createElement(Oe,{items:[{id:"1",sender:"Agent Name",receiver:"Jane Doe",storageUrl:"https://dl.espressif.com/dl/audio/ff-16b-2c-44100hz.mp3",createdAt:"2024-01-01T00:00:00Z",isParent:!0,type:"VoiceNote"},{id:"2",sender:"Jane Doe",receiver:"Agent Name",storageUrl:"https://dl.espressif.com/dl/audio/ff-16b-2c-44100hz.mp3",createdAt:"2024-01-01T00:00:00Z",isParent:!1,type:"VoiceNote"},{id:"3",sender:"Agent Name",receiver:"Jane Doe",createdAt:"2024-01-01T00:00:00Z",isParent:!0,type:"MissedCall"},{id:"4",sender:"Jane Doe",receiver:"Agent Name",createdAt:"2024-01-01T00:00:00Z",isParent:!1,type:"MissedCall"},{id:"5",sender:"Agent Name",receiver:"Jane Doe",storageUrl:"https://dl.espressif.com/dl/audio/ff-16b-2c-44100hz.mp3",createdAt:"2024-01-01T00:00:00Z",isParent:!0,type:"CallHeld"},{id:"6",sender:"Jane Doe",receiver:"Agent Name",storageUrl:"https://dl.espressif.com/dl/audio/ff-16b-2c-44100hz.mp3",createdAt:"2024-01-01T00:00:00Z",isParent:!1,type:"CallHeld"},{id:"7",sender:"",receiver:"Agent Name",createdAt:"2024-01-01T00:00:00Z",isParent:!1,type:"CallScheduled"}],ItemNode:Le,onWidgetDetailClose:()=>{e(!1),t("default")}}))};var Ve=n(538),Xe=n(3754),Je=n(4115),He=n(1589),Ze=n(1783);function qe(e){const{btnMode:t,children:n,onBtnClick:i,disabled:a}=e;return r.createElement(ce.A,{size:"small",color:"secondary",sx:e=>"on"===t?(e=>({color:"".concat(e.palette.secondary.contrastText," !important"),background:"".concat(e.palette.secondary.main," !important"),"&:hover":{background:"".concat((0,d.X4)(e.palette.secondary.main,.9)," !important")}}))(e):(e=>({background:"".concat((0,d.X4)(e.palette.secondary.main,.12)," !important"),"&:hover":{background:"".concat((0,d.X4)(e.palette.secondary.main,.24)," !important")}}))(e),onClick:i,disabled:a},n)}qe.defaultProps={disabled:!1};const Ye=qe,Ge=function(){const{meeting:e}=(0,He.xg)(),t=(0,He.zf)((e=>e.self.audioEnabled));return r.createElement(o.A,null,r.createElement(Ye,{btnMode:t?"on":"off",onBtnClick:async()=>{let n;return n=t?await e.self.disableAudio():await e.self.enableAudio(),n}},t?r.createElement(J.A,null):r.createElement(Ze.A,null)))};var _e=n(6493),Ke=n(1756);const Qe=function(){const{meeting:e}=(0,He.xg)(),t=(0,He.zf)((e=>e.self.videoEnabled));return r.createElement(o.A,null,r.createElement(Ye,{btnMode:t?"on":"off",onBtnClick:()=>(async()=>{let n;return n=t?await e.self.disableVideo():await e.self.enableVideo(),n})()},t?r.createElement(_e.A,null):r.createElement(Ke.A,null)))};var $e=n(8636);const et=function(){const{meeting:e}=(0,He.xg)(),t=(0,He.zf)((e=>e.self.roomJoined)),n=(0,He.zf)((e=>e.self.screenShareEnabled)),i=(0,He.zf)((e=>e.participants.joined.toArray().filter((e=>e.screenShareEnabled))));return r.createElement(o.A,null,t&&r.createElement(Ye,{btnMode:n?"on":"off",disabled:Boolean(null==i?void 0:i.length),onBtnClick:async()=>{let t;return t=n?await e.self.disableScreenShare():await e.self.enableScreenShare(),t}},r.createElement($e.A,null)))};var tt=n(7195);const nt=function(){const{meeting:e}=(0,He.xg)(),t=(0,He.zf)((e=>e.self.roomJoined)),n=ae((e=>e.endMeeting));return r.createElement(o.A,null,t&&r.createElement(ce.A,{size:"small",color:"secondary",sx:e=>({color:"".concat(e.palette.error.contrastText," !important"),background:"".concat(e.palette.error.main," !important"),"&:hover":{background:"".concat((0,d.X4)(e.palette.error.main,.9)," !important")}}),onClick:async()=>{const t=await e.leave();return n(),t}},r.createElement(tt.A,null)))};function rt(e){const{participants:t,ringingVideoParticipantTile:n,offlineParticipantTile:i,videoParticipantTileNode:a,screenShareParticipant:o,screenShareViewNode:l}=e;let c=0;n&&i?c=2:(n||i)&&(c=1);const s=t.length+c;return r.createElement(De.Ay,{container:!0,columns:12,spacing:1,sx:{width:"100%"}},o?r.createElement(r.Fragment,null,r.createElement(De.Ay,{item:!0,xs:8},o&&l(o)),r.createElement(De.Ay,{item:!0,xs:4,display:"flex",flexDirection:"column",justifyContent:"center"},Boolean(n)&&r.createElement(De.Ay,{item:!0,xs:12,display:"flex",alignItems:"center"},n),Boolean(i)&&r.createElement(De.Ay,{item:!0,xs:12,display:"flex",alignItems:"center"},i),null==t?void 0:t.map((e=>r.createElement(De.Ay,{item:!0,xs:12,key:"call-grid-".concat(e.id),display:"flex",alignItems:"center"},a(e)))))):r.createElement(r.Fragment,null,Boolean(n)&&r.createElement(De.Ay,{item:!0,xs:12/s},n),Boolean(i)&&r.createElement(De.Ay,{item:!0,xs:12/s},i),null==t?void 0:t.map((e=>r.createElement(De.Ay,{item:!0,xs:12/s,key:"call-grid-".concat(e.id)},a(e))))))}rt.defaultProps={ringingVideoParticipantTile:null,offlineParticipantTile:null};const it=rt;function at(e){const{dimensions:t,participantId:n,participantName:i,isSelf:a,screenShareEnabled:l,screenShareTracks:c,borderRadius:s}=e,{meeting:u}=(0,He.xg)(),m=r.useRef(null),p=r.useRef(null);return(0,r.useEffect)((()=>{if(n&&l&&c.video){const e=new MediaStream;e.addTrack(c.video),m.current&&(m.current.srcObject=e)}}),[l,c.video,n]),(0,r.useEffect)((()=>{if(n&&!a&&l&&c.audio){const e=new MediaStream;e.addTrack(c.audio),p.current&&(p.current.srcObject=e)}}),[a,l,c.audio,n]),r.createElement(o.A,{sx:{display:"flex",overflow:"hidden",position:"relative",background:e=>{let{palette:t}=e;return t.common.black},...t,borderRadius:s&&{rounded:"8px",square:"0px",extraRounded:"16px"}[s]}},l&&!a&&r.createElement(o.A,{sx:{width:"100%",objectFit:"contain"},component:"audio",id:"screen-share-audio-".concat(n),ref:p,autoPlay:!0,playsInline:!0}),r.createElement(o.A,{sx:{width:"100%",objectFit:"contain"},component:"video",id:"screen-share-video-".concat(n),ref:m,autoPlay:!0,playsInline:!0}),l&&a&&r.createElement(o.A,null,r.createElement(o.A,{sx:{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",background:e=>{let{palette:t}=e;return(0,d.X4)(t.common.black,.5)}}},r.createElement(_.A,{variant:"contained",color:"error",onClick:async()=>await u.self.disableScreenShare()},"Stop Sharing"))),r.createElement(o.A,{sx:{position:"absolute",bottom:0,left:0,right:0,padding:"4px",display:"flex",color:e=>{let{palette:t}=e;return t.common.white}}},r.createElement(R.A,{direction:"row",sx:{background:e=>{let{palette:t}=e;return(0,d.X4)(t.common.black,.5)},maxWidth:"50%",p:.5,borderRadius:e=>{let{shape:t}=e;return"".concat(t.borderRadius,"px")}}},i&&r.createElement(W.A,{variant:"subtitle2",noWrap:!0},i,a&&" (You)"))))}at.defaultProps={dimensions:{width:200,aspectRatio:"16 / 9"},participantName:"",isSelf:!1,borderRadius:"rounded"};const ot=at;var lt=n(8393),ct=n(2250),st=n(1809);function dt(e){const{dimensions:t,participantId:n,participantName:i,isSelf:a,videoEnabled:l,videoTrack:c,audioEnabled:s,audioTrack:u,borderRadius:m,hideBottomLabel:p}=e;console.log("Hi",n);const g=r.useRef(null),h=r.useRef(null);return(0,r.useEffect)((()=>{if(n&&l&&c){const e=new MediaStream;e.addTrack(c),g.current&&(g.current.srcObject=e)}}),[l,c,n]),(0,r.useEffect)((()=>{if(n&&!a&&s&&u){const e=new MediaStream;e.addTrack(u),h.current&&(h.current.srcObject=e)}}),[a,s,u,n]),r.createElement(o.A,{sx:{display:"flex",overflow:"hidden",position:"relative",background:e=>{let{palette:t}=e;return"".concat(a?(0,d.X4)(t.secondary.main,.12):(0,d.X4)(t.primary.main,.12))},...t,borderRadius:m&&{rounded:"8px",square:"0px",extraRounded:"16px"}[m]}},s&&!a&&r.createElement(o.A,{sx:{width:"100%",objectFit:"cover"},component:"audio",id:"audio-".concat(n),ref:h,autoPlay:!0,playsInline:!0}),l?r.createElement(o.A,{sx:{width:"100%",objectFit:"cover"},component:"video",id:"video-".concat(n),ref:g,autoPlay:!0,playsInline:!0}):r.createElement(o.A,{sx:{width:"100%",height:"100%",display:"flex"}},r.createElement(o.A,{height:"40%",sx:{aspectRatio:1,margin:"auto"}},r.createElement(lt.A,{src:"img-url",alt:i,sx:{color:e=>{let{palette:t}=e;return t.text.primary},backgroundColor:e=>{let{palette:t}=e;return t.background.paper},width:"100%",height:"100%",aspectRatio:1}}))),!p&&r.createElement(o.A,{sx:{position:"absolute",bottom:0,left:0,right:0,padding:"4px",display:"flex",color:e=>{let{palette:t}=e;return t.common.white}}},r.createElement(R.A,{direction:"row",sx:{background:e=>{let{palette:t}=e;return(0,d.X4)(t.common.black,.5)},maxWidth:"50%",p:.5,borderRadius:e=>{let{shape:t}=e;return"".concat(t.borderRadius,"px")}}},s?r.createElement(ct.A,{fontSize:"small"}):r.createElement(st.A,{fontSize:"small"}),i&&r.createElement(W.A,{variant:"subtitle2",noWrap:!0},i,a&&" (You)"))))}dt.defaultProps={dimensions:{width:200,aspectRatio:"16 / 9"},participantName:"",isSelf:!1,borderRadius:"rounded",videoTrack:void 0,audioTrack:void 0,hideBottomLabel:!1};const ut=dt;function mt(e){const{startTimestamp:t,sx:n}=e,[i,a]=(0,r.useState)("00:00");return(0,r.useEffect)((()=>{const e=()=>{const e=Date.now(),n=new Date(t).getTime(),r=Math.floor((e-n)/1e3);a(xe(r))},n=setInterval((()=>{e()}),1e3);return e(),()=>clearInterval(n)}),[t]),r.createElement(o.A,null,r.createElement(W.A,{variant:"body2",sx:e=>n?n(e):{}},i,"s"))}mt.defaultProps={sx:()=>({})};const pt=mt,gt=function(){const e=(0,He.zf)((e=>e.self.roomJoined)),t=ae((e=>e.recStartTimestamp));return r.createElement(o.A,null,e&&Boolean(t)&&r.createElement(R.A,{direction:"row",spacing:.5,alignItems:"center"},r.createElement(pe.A,{color:"error",sx:{height:16,width:16,animation:"blinker 1s cubic-bezier(.5, 0, 1, 1) infinite alternate","@keyframes blinker":{"0%":{opacity:1},"100%":{opacity:0}}}}),r.createElement(pt,{startTimestamp:t,sx:e=>({fontSize:14,fontWeight:500,color:"text.secondary"})})))},ht=function(){const e=ae((e=>e.isMeetingStarted)),t=ae((e=>e.isCallRinging)),n=ae((e=>e.isUserJoined));let i="";return e&&(n||(i=t?"Ringing...":"Connecting...")),i?r.createElement(R.A,{direction:"row",maxWidth:120},r.createElement(W.A,{fontSize:12,fontWeight:500,variant:"body2",color:"text.secondary",noWrap:!0},i)):null};function ft(e){const{dimensions:t,borderRadius:n}=e;return r.createElement(o.A,{sx:{display:"flex",overflow:"hidden",position:"relative",background:e=>{let{palette:t}=e;return t.background.paper},...t,borderRadius:n&&{rounded:"8px",square:"0px",extraRounded:"16px"}[n],border:e=>{let{palette:t}=e;return"1px solid ".concat((0,d.X4)(t.secondary.main,.54))}}},r.createElement(R.A,{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",spacing:.75},r.createElement(W.A,{fontSize:14,fontWeight:600,variant:"body2",noWrap:!0},"Connecting"),r.createElement(W.A,{fontSize:12,variant:"body2",color:"textSecondary",noWrap:!0},"Notification Sent...")))}ft.defaultProps={dimensions:{width:200,aspectRatio:"16 / 9"},borderRadius:"rounded"};const Et=ft,bt=function(){const e=ae((e=>e.isMeetingStarted)),t=(ae((e=>e.isCallRinging)),ae((e=>e.isUserJoined)));return e&&!t?r.createElement(Et,{dimensions:{width:"100%",aspectRatio:"16 / 9"}}):null},At=function(){const e=ae((e=>e.isMeetingStarted)),t=(ae((e=>e.isCallRinging)),ae((e=>e.isUserJoined))),n=ae((e=>e.isUserDisconnected));return e&&t&&n?r.createElement(Et,{dimensions:{width:"100%",aspectRatio:"16 / 9"}}):null};function yt(e){const{isFullScreen:t}=e,{meeting:n}=(0,He.xg)(),i=(0,He.zf)((e=>e.self.id)),a=(0,He.zf)((e=>e.self.name)),o=(0,He.zf)((e=>e.self.videoEnabled)),l=(0,He.zf)((e=>e.self.videoTrack)),c=(0,He.zf)((e=>e.self.audioEnabled)),s=(0,He.zf)((e=>e.self.audioTrack)),d=(0,He.zf)((e=>e.self.screenShareEnabled)),u=(0,He.zf)((e=>e.self.screenShareTracks)),m=(0,He.zf)((e=>e.participants.active.toArray())),p=(0,He.zf)((e=>e.participants.joined.toArray().filter((e=>e.screenShareEnabled))[0])),g=ae((e=>e.recStartTimestamp)),h=ae((e=>e.setRecStartTimestamp)),f=(0,He.zf)((e=>e.recording.recordingState));(0,r.useEffect)((()=>{if("RECORDING"===f&&!g){const e=new Date;h(e.toISOString())}}),[f]);const E=(0,r.useMemo)((()=>p?{...p,isSelf:!1}:{id:i,name:a,videoEnabled:o,videoTrack:l,audioEnabled:c,audioTrack:s,screenShareEnabled:d,screenShareTracks:u,isSelf:!0}),[p,i,a,o,l,c,s,d,u]),b=(0,r.useMemo)((()=>{const e={id:i,name:a,isSelf:!0,videoEnabled:o,videoTrack:l,audioEnabled:c,audioTrack:s,screenShareEnabled:d,screenShareTracks:u};return[...m.map((e=>({...e,isSelf:!1}))),e]}),[m,i,a,o,l,c,s,d,u]),A=ae((e=>e.isCallRinging)),y=ae((e=>e.isUserJoined)),x=ae((e=>e.endMeeting));(0,r.useEffect)((()=>{let e;return!y&&A&&(e=setTimeout((()=>{y||n.leave().then((()=>{x()}))}),3e4)),()=>clearTimeout(e)}),[A,y]);const v=(0,He.zf)((e=>e.participants.active.size)),w=ae((e=>e.isUserDisconnected)),C=ae((e=>e.setIsUserJoined)),S=ae((e=>e.setIsUserDisconnected));return(0,r.useEffect)((()=>{v?(w&&S(!1),C(!0)):y&&(S(!0),n.leave().then((()=>{x()})))}),[v]),r.createElement(R.A,{spacing:2,flex:1,position:"relative"},r.createElement(R.A,{flex:1,alignItems:"center",justifyContent:"center"},r.createElement(it,{participants:b,videoParticipantTileNode:e=>(e=>r.createElement(ut,{key:e.id,dimensions:{width:"100%",aspectRatio:"16 / 9"},isSelf:e.isSelf,participantId:e.id,participantName:e.name,videoEnabled:e.videoEnabled,videoTrack:e.videoTrack,audioEnabled:e.audioEnabled,audioTrack:e.audioTrack}))(e),ringingVideoParticipantTile:bt(),offlineParticipantTile:At(),screenShareParticipant:(d||p)&&E,screenShareViewNode:e=>(e=>r.createElement(ot,{key:e.id,dimensions:{width:"100%",aspectRatio:"16 / 9"},participantId:e.id,participantName:e.name,isSelf:e.isSelf,screenShareEnabled:e.screenShareEnabled,screenShareTracks:e.screenShareTracks}))(e)})),r.createElement(R.A,{width:"100%",alignItems:"center",justifyContent:"center",spacing:3,direction:"row"},r.createElement(Ge,null),r.createElement(Qe,null),r.createElement(et,null),r.createElement(nt,null)),r.createElement(R.A,{position:"absolute",bottom:10,left:4},r.createElement(ht,null)),r.createElement(R.A,{position:"absolute",bottom:8,right:4},r.createElement(gt,null)))}yt.defaultProps={isFullScreen:!1};const xt=yt,vt=function(){const[e,t]=(0,He.fG)(),[n,i]=(0,r.useState)(!1),a=r.createRef();(0,r.useEffect)((()=>{const e=()=>{i(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}}),[]);const l=ae((e=>e.meetingAuthToken)),c=ae((e=>e.isMeetingStarted)),s=ae((e=>e.setIsMeetingStarted)),d=(ae((e=>e.isUserJoined)),ae((e=>e.meetingInitType)));return(0,r.useEffect)((()=>{l&&t({authToken:l,defaults:{audio:!0,video:"video"===d,screenShare:{displaySurface:"browser"}}}).then((e=>{e&&(e.join(),s(!0))}))}),[l]),l&&c?r.createElement(Ve.A,{sx:e=>((e,t)=>({backgroundColor:t?e.palette.background.paper:"transparent",width:"100%",height:"100%"}))(e,n),ref:a,elevation:0},r.createElement(He.wl,{value:e},r.createElement(R.A,{width:"100%",height:"100%",px:"5%",py:"5%",spacing:1},r.createElement(R.A,{direction:"row"},r.createElement(R.A,{flex:1}),r.createElement(o.A,null,r.createElement(ce.A,{onClick:()=>{var e,t;!n&&null!=a&&null!==(e=a.current)&&void 0!==e&&e.requestFullscreen&&(a.current.requestFullscreen(),i(!n)),n&&null!==(t=document)&&void 0!==t&&t.exitFullscreen&&(document.exitFullscreen(),i(!n))},color:"inherit"},n?r.createElement(Je.A,{sx:{width:16,height:16}}):r.createElement(Xe.A,{sx:{width:16,height:16}})))),r.createElement(xt,{isFullScreen:n})))):null},wt=e=>({...C(e,x.A.getState().widgetPosition,20,20,426,"fit-content","visible","fixed","detail"),border:"1px solid ".concat(e.palette.divider)}),Ct=function(){(0,x.A)((e=>e.setWidgetDetailOpen)),(0,x.A)((e=>e.setWidgetLauncher));const e=ae((e=>e.isMeetingLoading));return r.createElement(R.A,{sx:e=>({...wt(e)}),alignItems:"center",justifyContent:"center",direction:"row"},e?"Please wait while we connect the call":r.createElement(vt,null))};var St=n(5979);const kt=e=>({...C(e,x.A.getState().widgetPosition,108,20,"fit-content",v,"visible","fixed","detail"),border:"1px solid ".concat(e.palette.divider)}),Tt=function(){const e=(0,x.A)((e=>e.agentName))||"Agent",t=(0,x.A)((e=>e.teamName)),n=ae((e=>e.startMeeting)),i=(0,x.A)((e=>e.setWidgetLauncher)),a=ae((e=>e.setMeetingInitType)),l=(0,x.A)((e=>e.setWidgetDetailOpen));return r.createElement(R.A,{sx:e=>({...kt(e)}),alignItems:"center",justifyContent:"center",direction:"row"},r.createElement(R.A,{px:1.5,py:.75,height:"100%",position:"relative",justifyContent:"space-between"},r.createElement(o.A,null,r.createElement(W.A,{variant:"body1Bold",fontSize:14,noWrap:!0},e&&"Call from ".concat(e," in ").concat(t)," ")),r.createElement(R.A,{direction:"row",spacing:2,height:"100%",alignItems:"center",justifyContent:"center",position:"relative"},r.createElement(_.A,{variant:"contained",sx:{height:36,fontWeight:500,px:2},startIcon:r.createElement(_e.A,null),onClick:()=>{n("get"),a("video"),i("inCall")}},"Accept Video Call"),r.createElement(_.A,{variant:"contained",sx:{height:36,fontWeight:500,px:2},startIcon:r.createElement(St.A,null),onClick:()=>{n("get"),a("audio"),i("inCall")}},"Accept Voice Call"),r.createElement(_.A,{variant:"outlined",color:"error",sx:{height:36,fontWeight:500,px:2},onClick:()=>{l(!1),i("default")}},"Decline"))))},Mt=function(){const e=(0,x.A)((e=>e.newUnreadEvent)),{id:t,sender:n,receiver:i,storageUrl:a="",createdAt:l,isParent:c,type:s}=e,d=(0,x.A)((e=>e.teamName)),u=(0,x.A)((e=>e.setWidgetDetailOpen)),m=(0,x.A)((e=>e.setWidgetLauncher)),p=(0,x.A)((e=>e.setNewUnreadEvent));(0,r.useEffect)((()=>{}),[]);const[g,h]=(0,r.useState)(null);return r.createElement(R.A,{sx:e=>({...ue(e),width:284}),alignItems:"center",direction:"row"},Boolean(e)&&r.createElement(R.A,{px:1.5,py:.75,height:"100%",position:"relative",justifyContent:"space-between",width:"100%"},r.createElement(o.A,null,r.createElement(W.A,{fontSize:14,noWrap:!0},n," from ",d)),r.createElement(Re,{audioSrc:a,isCurrentPlaying:g===t,index:t,onPlay:e=>(e=>{h(e)})(e),onStop:()=>h(null)})),r.createElement(de,{onCloseDetail:()=>{p(null),u(!1),m("default")}}))},Pt=function(){const e=(0,x.A)((e=>e.newUnreadEvent)),{id:t,sender:n,receiver:i,createdAt:a,isParent:l,type:c}=e,s=(0,x.A)((e=>e.teamName)),d=(0,x.A)((e=>e.setWidgetDetailOpen)),u=(0,x.A)((e=>e.setWidgetLauncher)),m=(0,x.A)((e=>e.setNewUnreadEvent));(0,r.useEffect)((()=>{}),[]);const p=()=>{m(null)};return r.createElement(R.A,{sx:e=>({...ue(e)}),alignItems:"center",justifyContent:"center",direction:"row"},r.createElement(R.A,{px:1.5,py:.75,height:"100%",position:"relative",justifyContent:"space-between"},r.createElement(o.A,null,r.createElement(W.A,{variant:"body1Bold",fontSize:14,noWrap:!0},"Missed call from ",n," in ",s)),r.createElement(le,{hideTimelineBtn:!0,onCallBtnClick:p,onScheduleBtnClick:p,onVoiceNoteBtnClick:p,onTimelineBtnClick:p}),r.createElement(de,{onCloseDetail:()=>{m(null),d(!1),u("default")}})))},Rt=function(){const e=(0,x.A)((e=>e.widgetDetailOpen)),t=(0,x.A)((e=>e.widgetLauncher));if(e)switch(t){case"default":return r.createElement(me,null);case"voiceNote":return r.createElement(Mt,null);case"missedCall":return r.createElement(Pt,null);case"voiceRecording":return r.createElement(We,null);case"aboutToReceiveCall":case"none":default:return null;case"timeline":return r.createElement(Fe,null);case"ringing":return r.createElement(Tt,null);case"inCall":return r.createElement(Ct,null)}return null},It=function(e){var t,n,m,f,v,w;let{shadowWidgetRootElement:C}=e;const S=(0,x.A)((e=>e.themeMode)),k=(0,l.A)((e=>{const t=((e,t)=>({...t,mode:e,..."light"===e?{primary:{main:"#34A974"},secondary:{main:"#524C91"},error:{main:"#E01D5A"},tonalOffset:{light:.1,dark:.1},text:{primary:"#0D0C22",secondary:(0,d.X4)("#0D0C22",.54),disabled:(0,d.X4)("#0D0C22",.37)},contrastThreshold:2.96}:{primary:{main:"#34A974"},secondary:{main:"#524C91"},text:{primary:"#fff",secondary:s.A[200]}}}))(e,(0,c.A)({palette:{mode:e}}).palette);return(0,c.A)({palette:t,typography:u(t),shape:{borderRadius:8},components:{MuiScopedCssBaseline:{styleOverrides:{root:{backgroundColor:"transparent",margin:"0 !important",padding:"0 !important",boxSizing:"border-box !important"}}},MuiButton:p(t),MuiTypography:{defaultProps:{variantMapping:{body1Bold:"p",caption2:"p"}}},MuiAppBar:g(t),MuiFormControlLabel:{styleOverrides:{root:{},asterisk:{display:"none"}},defaultProps:{}},MuiFormHelperText:{styleOverrides:{root:{marginLeft:0}},defaultProps:{}},MuiTextField:h(t),MuiSelect:E(t),MuiSwitch:b(t),MuiCheckbox:{styleOverrides:{root:{}},defaultProps:{}},MuiTableCell:A(t),MuiTableRow:y(t),MuiTabs:{styleOverrides:{root:e=>{let{theme:t}=e;return{borderBottom:"1px solid ".concat(t.palette.text.primary),"& .MuiTabs-indicator":{display:"none"},minHeight:40,height:40}}},defaultProps:{}},MuiTab:{styleOverrides:{root:e=>{let{theme:t}=e;return{textTransform:"none",minWidth:0,[t.breakpoints.up("sm")]:{minWidth:0},marginRight:t.spacing(.5),color:t.palette.text.primary,background:"linear-gradient(126deg, ".concat((0,d.X4)(t.palette.primary.main,.06)," 15.93%, ").concat((0,d.X4)(t.palette.secondary.main,.06)," 93.42%)"),borderTopLeftRadius:t.shape.borderRadius,borderTopRightRadius:t.shape.borderRadius,"&:hover":{},"&.Mui-selected":{color:t.palette.common.white,background:"linear-gradient(126deg, ".concat(t.palette.primary.main," 15.93%, ").concat(t.palette.secondary.main," 93.42%)")},minHeight:40,height:40}}},defaultProps:{}},MuiSlider:{styleOverrides:{root:e=>{let{theme:t}=e;return{height:6,"& .MuiSlider-thumb":{display:"none"},"& .MuiSlider-track":{border:"none",height:6,minWidth:6}}}},defaultProps:{}}}})})(S)),T={...k,components:{...k.components,MuiPopover:{...null===(t=k.components)||void 0===t?void 0:t.MuiPopover,defaultProps:{...null===(n=k.components)||void 0===n||null===(n=n.MuiPopover)||void 0===n?void 0:n.defaultProps,container:C}},MuiPopper:{...null===(m=k.components)||void 0===m?void 0:m.MuiPopper,defaultProps:{...null===(f=k.components)||void 0===f||null===(f=f.MuiPopper)||void 0===f?void 0:f.defaultProps,container:C}},MuiModal:{...null===(v=k.components)||void 0===v?void 0:v.MuiModal,defaultProps:{...null===(w=k.components)||void 0===w||null===(w=w.MuiModal)||void 0===w?void 0:w.defaultProps,container:C}}}},M=(0,x.A)((e=>e.showWidget)),P=(0,x.A)((e=>e.endUserId)),R=(0,x.A)((e=>e.newUnreadEvent)),I=(0,x.A)((e=>e.setWidgetLauncher)),W=(0,x.A)((e=>e.widgetDetailOpen));return(0,r.useEffect)((()=>{if(R&&!W){const{type:e}=R;switch(e){case"VoiceNote":I("voiceNote");break;case"MissedCall":I("missedCall")}}}),[R]),M&&P?r.createElement(i.A,{theme:T},r.createElement(a.A,null,r.createElement(o.A,{className:"app"},r.createElement(o.A,{sx:{position:"fixed",bottom:50,background:"blue"}},"Hello this is background KJbkad iadiuai aiubiaubxiub aiux abxhabxbs ixbsi bxsxsbxsb xksibi"),r.createElement(G,null),r.createElement(Rt,null)))):null}}}]);